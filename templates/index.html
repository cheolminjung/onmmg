<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>

    <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet">
    <!--            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->

    <!--    <link href="{% static 'css/style.css' %}" rel="stylesheet">-->
    <link href="{% static 'css/animate.css' %}" rel="stylesheet">


    <!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"-->
    <!--          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
    <!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"-->
    <!--            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"-->
    <!--            crossorigin="anonymous"></script>-->
    <meta charset="UTF-8">
    <title>오늘 뭐 먹지? - 강남역 직장인 점심 추천</title>
    <style>

        /* 웹폰트 정의 */
 @font-face {
     font-family: 'GmarketSansMedium';
     src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
     font-weight: normal;
     font-style: normal;
 }

 /* 특정 클래스에 폰트 적용 */
 .custom-font {
     font-family: 'GmarketSansMedium', sans-serif;
             font-weight: bold; /* 굵은 폰트 */

 }
     @font-face {
        font-family: 'Pretendard-Regular';
        src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
        font-weight: 400;
        font-style: normal;
    }

    /* 전체 페이지에 폰트 적용 */
    body {
        font-family: 'Pretendard-Regular', sans-serif;
        font-weight: 400; /* 기본 두께 */
<!--                    padding-top: 70px; /* Navbar 높이만큼 패딩 */-->

    }


     /* 이미지 크기 제한 */
     .carousel-inner img {
         max-width: 576px;
         max-height: 576px;
         object-fit: contain; /* 이미지 비율 유지 */
         margin: auto; /* 이미지를 중앙 정렬 */
     }

     .container {
         max-width: 576px; /* Bootstrap의 sm 크기로 제한 */
         margin: auto; /* 중앙 정렬 */
     }

     /* Carousel 컨트롤 색상 변경 */
     .carousel-control-prev-icon,
     .carousel-control-next-icon {
         background-color: rgba(0, 0, 0, 0.5); /* 반투명 검정색 */
         border-radius: 50%; /* 동그랗게 */
     }

        /* list-group-item 스타일 제거 */
     .list-group-item {
         border: none; /* 테두리 제거 */
         padding: 5px 0; /* 패딩 줄이기 */
         background-color: transparent; /* 배경 투명 */
     }

.floating-full-width-button {
    position: fixed;                  /* 화면 하단에 고정 */
    bottom: 20px;                     /* 하단에서 20px 위에 배치 */
    left: 50%;                        /* 화면 좌측에서 50% 위치 */
    transform: translateX(-50%);      /* 정확히 가운데 정렬 */
    width: 100%;                      /* 너비를 100%로 설정 */
    max-width: 550px;                 /* 최대 너비를 576px로 제한 */
    padding: 10px 0;                  /* 위아래 여백 설정 */
    border-radius: 10px;              /* 버튼 모서리 둥글게 */
    z-index: 1000;                    /* 다른 요소 위에 표시 */
    background-color: rgba(0, 0, 0, 1); /* 50% 투명한 배경 (Bootstrap 기본 파란색) */
    color: #fff;                      /* 텍스트 색상 */
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.8); /* Glow 효과 */
    border: none;                     /* 테두리 제거 */
    font-weight: bold;                /* 글씨 굵게 */
    text-align: center;               /* 텍스트 가운데 정렬 */
    transition: box-shadow 0.3s ease, background-color 0.3s ease; /* 부드러운 효과 */
}

/* 호버 시 Glow 효과 강조 */
.floating-full-width-button:hover {
    box-shadow: 0 0 25px rgba(0, 0, 0, 1); /* 더 강한 Glow 효과 */
    background-color: rgba(0, 0, 0, 0.7);  /* 호버 시 투명도 감소 */
}
    </style>
</head>
<script>
</script>
<body> <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <!-- Navbar Brand -->
        <a class="navbar-brand" href="/">
            <h1 class="custom-font mb-0 pb-0 d-inline">오널모목찌</h1><span class="text-muted d-inline"
                                                                       style="font-size: calc(100% - 4pt);">강남역 직장인 점심</span>
        </a>
        <!-- Navbar Button -->
        <!--        <a class="btn btn-primary" href="#" role="button">이거나 먹어라</a>-->
        <button type="button" class="btn  btn-primary     floating-full-width-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
            먹은거 자랑
        </button>


        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title custom-font fs-5" id="exampleModalLabel">무엇을 드셨소?</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            {{ form.as_p }}
                            <button type="submit" name="post_form" class="btn btn-primary">저장</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


    </div>
</nav>
<div class="container mt-4">
    <!-- Store Name -->
    {% for post in posts %}
    <div class="rounded border mb-5 p-2 py-3 shadow">
        <h5 class="mb-3 fw-bold custom-font">{{ post.title }}</h5>
        <div id="carousel-{{ forloop.counter }}" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                {% for photo in post.photos %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <img src="{{ photo.url }}" class="d-block w-100" alt="Image {{ forloop.counter }}">
                </div>
                {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-{{ forloop.counter }}"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel-{{ forloop.counter }}"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <!-- 게시글 내용 -->
        <div class="row m-1 align-items-center">
            <div class="col p-0">
                <strong class="">
                    {% if post.author %}
                    {{ post.author.username }}
                    {% else %}
                    익명
                    {% endif %}
                </strong>
                <span class="text-muted">{{ post.grade|floatformat:0 }}점</span>
            </div>

            <div class="col text-end">
                {% if post.additional_url %}
                <a href="{{ post.additional_url }}" class="text-muted text-decoration-none">지도보기</a>
                {% endif %}
            </div>
        </div>

        <p class="mt-2 m-1">{{ post.content }}</p>


        <div class="mt-4"></div>

        <!-- 댓글 작성 폼 -->
        <form method="POST" class="row">
            {% csrf_token %}
            <div class="col m-0 pe-0">
                {{ comment_form.as_p }}
            </div>
            <div class="col-auto">
                <input type="hidden" name="post_id" value="{{ post.id }}">
                <button type="submit" name="comment_form" class="btn btn-primary">댓글 등록</button>
            </div>

        </form>
        <!-- 댓글 리스트 -->

        <ul class="list-group m-1 mt-0">
            {% for comment in post.comments.all %}
            <li class="list-group-item">
                <strong>
                    {% if comment.author %}
                    {{ comment.author.username }}
                    {% else %}
                    익명
                    {% endif %}
                    </strong>
                <span class="text-muted"> {{ comment.content }} </span>
<!--                <span class="badge bg-secondary float-end">{{ comment.likes }} Likes</span>-->
            </li>
            {% empty %}
            <li class="list-group-item text-muted">댓글이 없습니다.</li>
            {% endfor %}
        </ul>


    </div>
    {% endfor %}


</div>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script> <!--항상 마지막에-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>-->
</body>

</html>